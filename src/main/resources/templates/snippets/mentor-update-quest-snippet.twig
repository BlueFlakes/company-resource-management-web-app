<form method="post">
    <label for="#mentor-update-quest-choose-quest">Choose quest</label>
    <select name="quest_id" id="#mentor-update-quest-choose-quest" onchange="fillFields()" autofocus>
        <option disabled selected value>choose quest</option>
        {% for quest in quests %}
            <option value="{{quest.getId()}}">{{quest.getName()}}</option>
        {% endfor %}
    </select>
    <label for="#mentor-update-quest-new-quest-category">Choose new quest category</label>
    <select name="category_id" id="#mentor-update-quest-new-quest-category">
        <option disabled selected value> choose category </option>
        {% for category in quest_categories %}
            <option value="{{category.getId()}}">{{category.getName()}}</option>
        {% endfor %}
    </select>
    <label for="#mentor-update-quest-new-name">Name</label>
    <input type="text" name="quest_name" id="#mentor-update-quest-new-name" required>
    <label for="#mentor-update-quest-new-value">Value</label>
    <input type="number" name="value" id="#mentor-update-quest-new-value" required min="1">
    <label for="#mentor-update-quest-new-description">Description</label>
    <textarea name="description" id="#mentor-update-quest-new-description" required></textarea>
    <input type="submit" value="Submit">
</form>

<script>
    function fillFields() {
        var quest_id = document.getElementById("#mentor-update-quest-choose-quest").value;

        var http = new XMLHttpRequest();
        var url = "/mentor/get_quest";
        var params = "quest_id=" + quest_id;
        http.open("POST", url, true);

        http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

        http.onreadystatechange = function() {
            if(http.readyState == 4 && http.status == 200) {
                var quest = JSON.parse(this.responseText);
                injectQuestData(quest);
            }
        }
        http.send(params);
    }

    function injectQuestData(quest) {
        document.getElementById("#mentor-update-quest-new-name").value = quest.name;
        document.getElementById("#mentor-update-quest-new-description").value = quest.description;
        document.getElementById("#mentor-update-quest-new-value").value = quest.value;
        document.getElementById("#mentor-update-quest-new-quest-category").value = quest.categoryId;
    }
</script>